import{s as W,r as X}from"../chunks/scheduler.4c92a8b0.js";import{S as Y,i as Z,r as $,s as T,g as u,m as tt,u as et,c as C,h as d,j as E,y as q,f as g,n as st,k as e,v as at,a as G,x as s,z as M,A as x,B as rt,o as ot,d as nt,t as lt,w as it}from"../chunks/index.39a7fe6d.js";import{h as ut}from"../chunks/singletons.f1838e82.js";import{T as dt,t as K}from"../chunks/Toaster.82ed8b67.js";const Q=ut("goto");function ct(m){let h,r,o,v,a,n,k='<h1 class="fw-bolder">UD . 84!</h1>',I,l,_,i,z="Email",S,c,j,y,w,H="Password",N,f,O,b,D,P,U,R;return h=new dt({}),{c(){$(h.$$.fragment),r=T(),o=u("div"),v=u("div"),a=u("div"),n=u("div"),n.innerHTML=k,I=T(),l=u("form"),_=u("div"),i=u("label"),i.textContent=z,S=T(),c=u("input"),j=T(),y=u("div"),w=u("label"),w.textContent=H,N=T(),f=u("input"),O=T(),b=u("button"),D=tt(m[1]),this.h()},l(t){et(h.$$.fragment,t),r=C(t),o=d(t,"DIV",{class:!0});var p=E(o);v=d(p,"DIV",{class:!0});var F=E(v);a=d(F,"DIV",{class:!0});var L=E(a);n=d(L,"DIV",{class:!0,"data-svelte-h":!0}),q(n)!=="svelte-1m4lhcc"&&(n.innerHTML=k),I=C(L),l=d(L,"FORM",{});var A=E(l);_=d(A,"DIV",{class:!0});var V=E(_);i=d(V,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),q(i)!=="svelte-npa7zp"&&(i.textContent=z),S=C(V),c=d(V,"INPUT",{type:!0,class:!0,placeholder:!0}),V.forEach(g),j=C(A),y=d(A,"DIV",{class:!0});var B=E(y);w=d(B,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),q(w)!=="svelte-5rkg8t"&&(w.textContent=H),N=C(B),f=d(B,"INPUT",{type:!0,class:!0,placeholder:!0}),B.forEach(g),O=C(A),b=d(A,"BUTTON",{type:!0,class:!0});var J=E(b);D=st(J,m[1]),J.forEach(g),A.forEach(g),L.forEach(g),F.forEach(g),p.forEach(g),this.h()},h(){e(n,"class","text-center mb-5"),e(i,"for","inputEmail"),e(i,"class","form-label fw-bold"),e(c,"type","email"),e(c,"class","form-control"),e(c,"placeholder","Email Anda"),c.required=!0,e(_,"class","form-group my-3"),e(w,"for","inputPassword"),e(w,"class","form-label fw-bold"),e(f,"type","password"),e(f,"class","form-control"),e(f,"placeholder","Password Anda"),f.required=!0,e(y,"class","form-group my-3"),e(b,"type","submit"),e(b,"class","btn btn-primary w-100"),b.disabled=m[0],e(a,"class","card-body"),e(v,"class","card shadow-sm"),e(o,"class","d-flex align-items-center justify-content-center vh-100")},m(t,p){at(h,t,p),G(t,r,p),G(t,o,p),s(o,v),s(v,a),s(a,n),s(a,I),s(a,l),s(l,_),s(_,i),s(_,S),s(_,c),M(c,m[2]),s(l,j),s(l,y),s(y,w),s(y,N),s(y,f),M(f,m[3]),s(l,O),s(l,b),s(b,D),P=!0,U||(R=[x(c,"input",m[5]),x(f,"input",m[6]),x(l,"submit",rt(m[4]))],U=!0)},p(t,[p]){p&4&&c.value!==t[2]&&M(c,t[2]),p&8&&f.value!==t[3]&&M(f,t[3]),(!P||p&2)&&ot(D,t[1]),(!P||p&1)&&(b.disabled=t[0])},i(t){P||(nt(h.$$.fragment,t),P=!0)},o(t){lt(h.$$.fragment,t),P=!1},d(t){t&&(g(r),g(o)),it(h,t),U=!1,X(R)}}}function ft(m,h,r){let o=!1,v="Masuk",a,n;async function k(){r(1,v="Silahkan tunggu"),r(0,o=!0),K.loading("Authenticating..",{position:"top-right",duration:2e3});const i=await(await fetch("https://esdelfron.deabakery.co.id/api/Log-In",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:a,password:n})})).json();return console.log(i),i.status=="Authenticated"?(r(0,o=!1),i.privilege=="Administrator"?Q("/master-produk"):Q("/staff")):(r(1,v="Masuk"),r(0,o=!1),K.error("Auth failed.",{position:"top-right"}))}function I(){a=this.value,r(2,a)}function l(){n=this.value,r(3,n)}return[o,v,a,n,k,I,l]}class _t extends Y{constructor(h){super(),Z(this,h,ft,ct,W,{})}}export{_t as component};
